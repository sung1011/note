# etcd watch

监听etcd中的key的变化。watch机制是基于gRPC的一种长连接机制, 客户端向etcd发送一个watch请求, etcd会将这个请求保存到一个队列中, 当有key发生变化时, etcd会将这个变化发送给客户端。

## 为什么需要watch

在实际的业务场景中, 有时候我们需要对key的变化进行监听, 比如配置中心的配置变更, 服务的注册和发现等。这时候watch就派上用场了。

## watch的操作

### 创建watch

```shell
etcdctl watch key
```

### 监听key的变化

```shell
etcdctl watch key
```

## watch的应用

### 配置中心

通过watch, 我们可以监听配置中心的配置变化, 当配置发生变化时, 我们可以及时通知到服务。

### 服务注册和发现

通过watch, 我们可以监听服务的注册和发现, 当服务发生变化时, 我们可以及时通知到服务。

### 通知

通过watch, 我们可以监听通知的变化, 当通知发生变化时, 我们可以及时通知到服务。

### 日志

通过watch, 我们可以监听日志的变化, 当日志发生变化时, 我们可以及时通知到服务。

## 总结

watch是etcd中一个非常重要的概念, 它可以帮助我们实现一些复杂的功能, 比如配置中心, 服务注册和发现, 通知等。
``