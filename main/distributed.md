# distributed  

## 一致性算法

- [Raft](algo-raft.md)
- Paxos
- PBFT
- [PoW 工作量证明算法](algo-pow.md)
- [PoS 权益证明算法](algo-pos.md)
- [DPos 代表权益证明算法](algo-dpos.md)
- [一致性哈希 DHT](algo-DHT.md)  

---

## 集群

    多个组件在一起作同样的事.

---

## 分布式

    多个组件在一起作不同的事.
  
---

## [分布式事务](acid.md)

---

## 惊群

多个子进程在同一时刻监听同一个端口造成的资源浪费  
  
---

## 锁  

### 乐观锁(Optimistic Lock)

顾名思义, 就是很乐观, 每次去拿数据的时候都认为别人不会修改, 所以不会上锁, 但是在更新的时候会判断一下在此期间别人有没有去更新这个数据, 可以使用版本号等机制.  
乐观锁适用于多读的应用类型, 这样可以省去锁的开销, 提高吞吐量, 像数据库如果提供类似于write_condition机制的其实都是提供的乐观锁.  

### 悲观锁(Pessimistic Lock)

顾名思义, 就是很悲观, 每次去拿数据的时候都认为别人会修改, 所以每次在拿数据的时候都会上锁, 这样别人想拿这个数据就会block直到它拿到锁.  
传统的关系型数据库里边就用到了很多这种锁机制, 比如行锁, 表锁等, 读锁, 写锁等, 都是在做操作之前先上锁.  
如果经常产生冲突, 上层应用会不断的进行retry, 这样反倒是降低了性能, 适合上悲观锁.  

---

## 多副本同步

### 主从

#### 全同步复制

master收到写请求后, 必须等待全部slave节点写入后返回.

#### 异步复制

master收到写请求后, 直接返回, 异步将请求转发给slave节点.

#### 半同步复制

master收到写请求后, 至少有n个slave节点写入后返回.

#### [raft](algo-raft.md)

#### paxos

### 去中心化复制

无master, 任意节点可处理写请求, 但一个写入需要n个节点确认, 一个读取也必须查询m个节点 (法定票数读 quorum-read).

    - 优点: 节点平等,易于维护
    - 缺点: 容易写入冲突
---
