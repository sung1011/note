# 平衡多路查找树 b-tree

![img](res/ds-b-tree.png)

    基于平衡二叉树
    可拥有 n 个子节点 (n>=2)
    每个子节点包含n key 和 多路(n+1)。

> 1节点->1~n key  
> 1 key-> 2 路/阶；2 key-> 3 路/阶；3 key-> 4 路/阶。。。 n key-> n+1 路/阶  
> 子节点保存的是下层子节点的指针，叶子节点保存的是数据。  
> [二叉树](ds-binary-tree.md)  
> [二叉搜索树](ds-binary-search-tree.md)  
> [平衡二叉树](ds-AVL-tree.md)

## 特征

- `每个节点可包含n个key 和 n+1路`

## 操作

- `search O(log n)` 二分查找

- `insert O(log n)` 先定义这是x阶平衡树，由叶子插入，当节点的路大于阶时（即 key > x-1），向上进行节点合并。

       []3[]8[]11[]31[]

              []11[]
              /    \
       []3[]8[]    []`23`[]31[]

              []11[]
              /    \
       []3[]8[]    []23[]29[]31[]50[]

                []11[]29[]
              /      |     \
       []3[]8[] []23[]28[] []31[]50[]

- `delete O(log n)`

## 对比

### vs 平衡二叉树

1. 降低了树高，即提升了查询交互次数

### vs B+Tree

1. 关键字集合分布在整颗树中
2. 任何一个关键字出现且只出现在一个结点中
3. 搜索有可能在非叶子结点结束
4. 其搜索性能等价于在关键字全集内做一次二分查找
5. 自动层次控制
6. 删除较慢

## ref

> `https://zhuanlan.zhihu.com/p/24309634`  
> `https://www.oschina.net/question/565065_86338`  
> `https://zhuanlan.zhihu.com/p/27700617`
