# 平衡多路查找树 b-tree

## 演化

1. 乱序

    [1, 12, 7, 6]

2. 有序

    [1]
    [1, 12]
    [1, 7, 12]  # 向数组中间插入7效率低 O(n)
    [1, 6, 7, 12] # 向数组中间插入6效率低 O(n)
    [1, 6, 7, 10, 12] # 向数组中间插入10效率低 O(n)

3. b-tree

    [1]
    [1, 12]
    [[1]7, 12]
    [[1, 6]7, 12]
    [[1, 6]7,[10] ,12]

## 特征

1. 定义任意非叶子结点最多只有 M 个儿 子；且 M>2 ；
2. 根结点的儿子数为 [2, M] ；
3. 除根结点以外的非叶子结点的儿子数为 [M/2, M] ；
4. 每个结点存放至少 M/2-1 （取 上整）和至多 M-1 个关键字；（至少 2 个关键 字）  # 导致删除慢
5. 非叶子结点的关键字个数 = 指向儿子的指针个数 -1 ；
6. 非叶子结点的关键字： K[1], K[2], …, K[M-1] ；且 K[i] < K[i+1] ；
7. 非叶子结点的指针： P[1], P[2], …, P[M] ；其中 P[1] 指向关键字小于 K[1] 的子树， P[M] 指向关键字大于 K[M-1] 的子树，其它 P[i] 指 向关键字属于 (K[i-1], K[i]) 的子树；
8. 所有叶子结点位于同一层；

## 时间

- insert
- delete
- update
- search log2(n)

## 对比

### vs 平衡二叉树

1. 降低了树高

### vs B+Tree

1. 关键字集合分布在整颗树中
2. 任何一个关键字出现且只出现在一个结点中
3. 搜索有可能在非叶子结点结束
4. 其搜索性能等价于在关键字全集内做一次二分查找
5. 自动层次控制
6. 删除较慢

## ex

> `https://www.oschina.net/question/565065_86338`
